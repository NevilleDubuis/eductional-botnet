#include <QMetaType>

#include "logging.h"

namespace utilities
{
    //qRegisterMetaType<LoggingType>("LoggingType");

    // Initialize the non-const static member
    //std::vector<std::function<void(QString, LoggingType)>> Logging::subscribers_;

    Logging::Logging()
    {
        qRegisterMetaType<utilities::LoggingType>("utilities::LoggingType");
    }

    /*void Logging::subscribe(std::function<void (QString, LoggingType)> handler)
    {
        subscribers_.push_back(handler);
    }*/

    void Logging::info(QString message, LoggingType type)
    {
        emit newMessage(message, type);
        /*for(std::function<void (QString, LoggingType)>& handler : subscribers_)
        {
            handler(message, type);
        }*/
    }

    Logging &Logging::get()
    {
        static Logging logging;
        return logging;
    }
}

