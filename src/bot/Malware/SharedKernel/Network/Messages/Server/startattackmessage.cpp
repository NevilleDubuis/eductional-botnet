#include "startattackmessage.h"

namespace network { namespace messages { namespace server
{
    std::shared_ptr<StartAttackMessage> StartAttackMessage::fromJson(QJsonObject json)
    {
        QJsonObject payload = json.value("payload").toObject();

        auto url = QUrl(payload.value("target").toString());
        url.setPort(payload.value("port").toInt());

        return std::make_shared<StartAttackMessage>(
                    payload.value("id").toInt(),
                    url,
                    payload.value("method").toString());
    }

    StartAttackMessage::StartAttackMessage(int idAttack, QUrl target, QString methodOfAttack)
        : ServerMessage(ServerOpcode::StartAttack)
    {
        idAttack_ = idAttack;
        target_ = target;
        methodOfAttack_ = methodOfAttack;
    }

    int StartAttackMessage::idAttack()
    {
        return idAttack_;
    }

    QString StartAttackMessage::methodOfAttack()
    {
        return methodOfAttack_;
    }

    QUrl StartAttackMessage::target()
    {
        return target_;
    }
}}}
