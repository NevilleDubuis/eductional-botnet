#ifndef SERVERADAPTER_H
#define SERVERADAPTER_H

#include <memory>

#include <QObject>

#include "Messages/Client/clientmessage.h"
#include "Messages/Server/servermessage.h"

namespace network
{
    /**
     * @brief An abstract adapter that manages the communication with a C&C server.
     */
    class ServerAdapter : public QObject
    {
        Q_OBJECT

    protected:
        ServerAdapter();

    public:
        /**
         * @brief Sends a given message to the server.
         * @param message The message to send.
         */
        virtual void send(messages::client::ClientMessage& message) = 0;

    signals:
        /**
         * @brief The slot is triggered when a message is received from the server.
         * @param message The message received.
         */
        void receive(std::shared_ptr<network::messages::server::ServerMessage> message);

        /**
         * @brief The slot is triggered when the server acknowledge any communication with the client,
         * regardless whether a message has been received.
         */
        void serverReplied();

        /**
         * @brief The slot is triggered when the client cannot communicate with the server.
         * @param error A message that represents the error.
         */
        void error(QString error);
    };
}

#endif // SERVERADAPTER_H
